[gd_scene load_steps=7 format=3 uid="uid://cinr6kcbmo6gr"]

[ext_resource type="Script" uid="uid://c3krxjp4ye4ko" path="res://Scripts/Parts/DropShadowRenderer.gd" id="1_q8gs4"]
[ext_resource type="Shader" uid="uid://x7lh23cq2u38" path="res://Scenes/Parts/ShadowShader.gdshader" id="2_g76ny"]
[ext_resource type="Script" uid="uid://dwtrmo82e12ud" path="res://Scripts/Parts/ColourPaletteSampler.gd" id="6_03isl"]
[ext_resource type="Script" uid="uid://cbal8ms2oe1ik" path="res://Scripts/Classes/Components/ResourceSetterNew.gd" id="7_5ikpa"]
[ext_resource type="JSON" path="res://Assets/Sprites/Particles/DropShadow.json" id="8_u22ru"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_q8gs4"]
shader = ExtResource("2_g76ny")
shader_parameter/shadow_colour = Vector4(0, 0, 0, 0)
shader_parameter/allow_transparency = false

[node name="DropShadow" type="Node2D"]
process_mode = 3
process_priority = 1
process_physics_priority = 1
physics_interpolation_mode = 2
script = ExtResource("1_q8gs4")
offset = Vector2(2, 0)

[node name="SubViewportContainer" type="SubViewportContainer" parent="."]
process_mode = 3
visibility_layer = 2
z_index = -50
z_as_relative = false
material = SubResource("ShaderMaterial_q8gs4")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -1.0
offset_top = 1.0
offset_right = 1.0
offset_bottom = 3.0
grow_horizontal = 2
grow_vertical = 2

[node name="SubViewport" type="SubViewport" parent="SubViewportContainer"]
process_mode = 3
transparent_bg = true
handle_input_locally = false
snap_2d_transforms_to_pixel = true
canvas_item_default_texture_filter = 0
canvas_cull_mask = 4293918721
size = Vector2i(2, 2)
render_target_update_mode = 4

[node name="Camera2D" type="Camera2D" parent="SubViewportContainer/SubViewport"]
process_mode = 3
physics_interpolation_mode = 2

[node name="ColourPaletteSampler" type="Node" parent="." node_paths=PackedStringArray("node_to_affect")]
script = ExtResource("6_03isl")
node_to_affect = NodePath("..")
value_to_set = "shadow_colour"
metadata/_custom_type_script = "uid://dwtrmo82e12ud"

[node name="ResourceSetter" type="Node" parent="ColourPaletteSampler" node_paths=PackedStringArray("node_to_affect")]
process_mode = 3
script = ExtResource("7_5ikpa")
node_to_affect = NodePath("..")
property_name = "texture"
mode = 1
resource_json = ExtResource("8_u22ru")
metadata/_custom_type_script = "uid://cbal8ms2oe1ik"
